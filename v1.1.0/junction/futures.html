
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>junction.futures – Representations of In-Progress Actions &mdash; junction 1.1.0 documentation</title>
    
    <link rel="stylesheet" href="../static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="junction 1.1.0 documentation" href="../index.html" />
    <link rel="next" title="junction.errors – Standard Error classes" href="errors.html" />
    <link rel="prev" title="junction.client – A Sender-Only Client Object" href="client.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="errors.html" title="junction.errors – Standard Error classes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="client.html" title="junction.client – A Sender-Only Client Object"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">junction 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-junction.futures">
<span id="junction-futures-representations-of-in-progress-actions"></span><h1><a class="reference internal" href="#module-junction.futures" title="junction.futures"><tt class="xref py py-mod docutils literal"><span class="pre">junction.futures</span></tt></a> &#8211; Representations of In-Progress Actions<a class="headerlink" href="#module-junction.futures" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="junction.futures.Dependent">
<em class="property">class </em><tt class="descclassname">junction.futures.</tt><tt class="descname">Dependent</tt><big>(</big><em>client</em>, <em>counter</em>, <em>parents</em>, <em>func</em><big>)</big><a class="headerlink" href="#junction.futures.Dependent" title="Permalink to this definition">¶</a></dt>
<dd><p>A function wrapper queued up to run after the termination of RPCs</p>
<p>instances of this class shouldn&#8217;t be created directly, they are returned by
<a class="reference internal" href="#junction.futures.RPC.after" title="junction.futures.RPC.after"><tt class="xref py py-meth docutils literal"><span class="pre">RPC.after()</span></tt></a> and <a class="reference internal" href="#junction.futures.Dependent.after" title="junction.futures.Dependent.after"><tt class="xref py py-meth docutils literal"><span class="pre">Dependent.after()</span></tt></a></p>
<dl class="method">
<dt id="junction.futures.Dependent.abort">
<tt class="descname">abort</tt><big>(</big><em>result</em><big>)</big><a class="headerlink" href="#junction.futures.Dependent.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>stop any pending action and set the result</p>
<p>this method will also abort all of its children and further descendents
with the same result</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>result</strong> &#8211; the object to which to hard-code the Dependent&#8217;s results</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="errors.html#junction.errors.AlreadyComplete" title="junction.errors.AlreadyComplete"><tt class="xref py py-class docutils literal"><span class="pre">AlreadyComplete</span></tt></a> if the
Dependent is already complete.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="junction.futures.Dependent.after">
<tt class="descname">after</tt><big>(</big><em>func=None</em>, <em>other_parents=None</em><big>)</big><a class="headerlink" href="#junction.futures.Dependent.after" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule <tt class="docutils literal"><span class="pre">func</span></tt> to run after the Dependent has completed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>function</em>) &#8211; a callback to run after this Dependent and any others in
<tt class="docutils literal"><span class="pre">other_parents</span></tt> have completed. the callback should take as many
arguments as the new Dependent has parents (one plus the length of
other_parents), and each argument will be one parent&#8217;s results. The
callback&#8217;s return value can be an <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a> instance, in which
case waiting on the Dependent will also wait for that RPC to
complete, or any other object which will then appear as the
<a class="reference internal" href="#junction.futures.Dependent.results" title="junction.futures.Dependent.results"><tt class="xref py py-attr docutils literal"><span class="pre">results</span></tt></a> attribute</li>
<li><strong>other_parents</strong> (<em>list or None</em>) &#8211; any combination of other <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a>s and <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>s
that should be waited on for completion before firing the callback</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>, which can be waited on, waited on as part of
a group of other <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a>s and <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>s with
<a class="reference internal" href="hub.html#junction.hub.Hub.wait_any" title="junction.hub.Hub.wait_any"><tt class="xref py py-meth docutils literal"><span class="pre">Hub.wait_any</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.Dependent.complete">
<tt class="descname">complete</tt><a class="headerlink" href="#junction.futures.Dependent.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the Dependent (and possibly its resulting RPC) has completed</p>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.Dependent.results">
<tt class="descname">results</tt><a class="headerlink" href="#junction.futures.Dependent.results" title="Permalink to this definition">¶</a></dt>
<dd><p>the results of the callback or of the RPC the callback produced</p>
<p><a class="reference internal" href="#junction.futures.Dependent.complete" title="junction.futures.Dependent.complete"><tt class="xref py py-attr docutils literal"><span class="pre">complete</span></tt></a> indicates whether the result is available or not, if
not then this attribute raises AttributeError.</p>
</dd></dl>

<dl class="method">
<dt id="junction.futures.Dependent.wait">
<tt class="descname">wait</tt><big>(</big><em>timeout=None</em><big>)</big><a class="headerlink" href="#junction.futures.Dependent.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Block the current greenlet until the operation has completed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> (<em>int, float or None</em>) &#8211; the maximum number of seconds to wait before raising a
<a class="reference internal" href="errors.html#junction.errors.WaitTimeout" title="junction.errors.WaitTimeout"><tt class="xref py py-class docutils literal"><span class="pre">WaitTimeout</span></tt></a>, the default of
None allows it to wait indefinitely.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The return value of the operation&#8217;s function, unless it returned a
<a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a>, in which case it returns the list of that RPC&#8217;s
results</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="errors.html#junction.errors.WaitTimeout" title="junction.errors.WaitTimeout"><tt class="xref py py-class docutils literal"><span class="pre">WaitTimeout</span></tt></a> if <tt class="docutils literal"><span class="pre">timeout</span></tt>
is supplied and runs out before the response arrives.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="junction.futures.RPC">
<em class="property">class </em><tt class="descclassname">junction.futures.</tt><tt class="descname">RPC</tt><big>(</big><em>client</em>, <em>counter</em>, <em>target_count</em>, <em>singular=False</em><big>)</big><a class="headerlink" href="#junction.futures.RPC" title="Permalink to this definition">¶</a></dt>
<dd><p>A representation of a single RPC request/response cycle</p>
<p>instances of this class shouldn&#8217;t be created directly, they are returned by
<a class="reference internal" href="hub.html#junction.hub.Hub.send_rpc" title="junction.hub.Hub.send_rpc"><tt class="xref py py-meth docutils literal"><span class="pre">Hub.send_rpc()</span></tt></a>.</p>
<dl class="method">
<dt id="junction.futures.RPC.abort">
<tt class="descname">abort</tt><big>(</big><em>result</em><big>)</big><a class="headerlink" href="#junction.futures.RPC.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>stop any pending action and set the result</p>
<p>this method will also abort all of its children and further descendents
with the same result</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>result</strong> &#8211; the object to which to hard-code the RPC&#8217;s results</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="errors.html#junction.errors.AlreadyComplete" title="junction.errors.AlreadyComplete"><tt class="xref py py-class docutils literal"><span class="pre">AlreadyComplete</span></tt></a> if the
RPC is already complete.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="junction.futures.RPC.after">
<tt class="descname">after</tt><big>(</big><em>func=None</em>, <em>other_parents=None</em><big>)</big><a class="headerlink" href="#junction.futures.RPC.after" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule <tt class="docutils literal"><span class="pre">func</span></tt> to run after the RPC has completed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>function</em>) &#8211; a callback to run after this RPC and any others in
<tt class="docutils literal"><span class="pre">other_parents</span></tt> have completed. the callback should take as many
arguments as the Dependent has parents (one plus the length of
other_parents), and each argument will be one parent&#8217;s results. The
callback&#8217;s return value can be an <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a> instance, in which
case waiting on the Dependent will also wait for that RPC to
complete, or any other object, which will appear as the
<a class="reference internal" href="#junction.futures.Dependent.results" title="junction.futures.Dependent.results"><tt class="xref py py-attr docutils literal"><span class="pre">results</span></tt></a> attribute</li>
<li><strong>other_parents</strong> (<em>list or None</em>) &#8211; any combination of other <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a>s and <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>s
that should be waited on for completion before firing the callback</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>, which can be waited on, waited on as part of
a group of other <a class="reference internal" href="#junction.futures.RPC" title="junction.futures.RPC"><tt class="xref py py-class docutils literal"><span class="pre">RPC</span></tt></a>s and <a class="reference internal" href="#junction.futures.Dependent" title="junction.futures.Dependent"><tt class="xref py py-class docutils literal"><span class="pre">Dependent</span></tt></a>s with
<a class="reference internal" href="hub.html#junction.hub.Hub.wait_any" title="junction.hub.Hub.wait_any"><tt class="xref py py-meth docutils literal"><span class="pre">Hub.wait_any</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.RPC.arrival">
<tt class="descname">arrival</tt><a class="headerlink" href="#junction.futures.RPC.arrival" title="Permalink to this definition">¶</a></dt>
<dd><p>An Event for waiting on partial results</p>
<p>this event is is triggered whenever a response arrives, so it can be
used to wake a blocking greenlet whenever <a class="reference internal" href="#junction.futures.RPC.partial_results" title="junction.futures.RPC.partial_results"><tt class="xref py py-attr docutils literal"><span class="pre">partial_results</span></tt></a> gets
a new item.</p>
<p>it is possible that a coroutine awoken from blocking on this event will
find that more than one result has arrived since the last time it was
awoken, but that should only occur when they arrive in very rapid
succession.</p>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.RPC.complete">
<tt class="descname">complete</tt><a class="headerlink" href="#junction.futures.RPC.complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the RPC&#8217;s response has arrived yet.</p>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.RPC.partial_results">
<tt class="descname">partial_results</tt><a class="headerlink" href="#junction.futures.RPC.partial_results" title="Permalink to this definition">¶</a></dt>
<dd><p>The results that the RPC has received so far</p>
<p>this may also be the complete results, if <a class="reference internal" href="#junction.futures.RPC.complete" title="junction.futures.RPC.complete"><tt class="xref py py-attr docutils literal"><span class="pre">complete</span></tt></a> is True</p>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.RPC.results">
<tt class="descname">results</tt><a class="headerlink" href="#junction.futures.RPC.results" title="Permalink to this definition">¶</a></dt>
<dd><p>The RPC&#8217;s response, if it has arrived</p>
<p><a class="reference internal" href="#junction.futures.RPC.complete" title="junction.futures.RPC.complete"><tt class="xref py py-attr docutils literal"><span class="pre">complete</span></tt></a> indicates whether the result is available or not, if
not then this attribute raises AttributeError.</p>
</dd></dl>

<dl class="attribute">
<dt id="junction.futures.RPC.target_count">
<tt class="descname">target_count</tt><a class="headerlink" href="#junction.futures.RPC.target_count" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of peer hubs that will return a response for this RPC</p>
</dd></dl>

<dl class="method">
<dt id="junction.futures.RPC.wait">
<tt class="descname">wait</tt><big>(</big><em>timeout=None</em><big>)</big><a class="headerlink" href="#junction.futures.RPC.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Block the current greenlet until the response arrives</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>timeout</strong> (<em>int, float or None</em>) &#8211; the maximum number of seconds to wait before raising a
<a class="reference internal" href="errors.html#junction.errors.WaitTimeout" title="junction.errors.WaitTimeout"><tt class="xref py py-class docutils literal"><span class="pre">WaitTimeout</span></tt></a>. the default of
None allows it to wait indefinitely.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a list of the responses returned by the RPC&#8217;s target peers, unless
it was created as a <em>singular</em> RPC in which case it is just the
single result</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><a class="reference internal" href="errors.html#junction.errors.WaitTimeout" title="junction.errors.WaitTimeout"><tt class="xref py py-class docutils literal"><span class="pre">WaitTimeout</span></tt></a> if <tt class="docutils literal"><span class="pre">timeout</span></tt>
is supplied and runs out before the response arrives.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="client.html"
                        title="previous chapter"><tt class="docutils literal docutils literal"><span class="pre">junction.client</span></tt> &#8211; A Sender-Only Client Object</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="errors.html"
                        title="next chapter"><tt class="docutils literal docutils literal"><span class="pre">junction.errors</span></tt> &#8211; Standard Error classes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/junction/futures.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="errors.html" title="junction.errors – Standard Error classes"
             >next</a> |</li>
        <li class="right" >
          <a href="client.html" title="junction.client – A Sender-Only Client Object"
             >previous</a> |</li>
        <li><a href="../index.html">junction 1.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Travis J Parker.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>